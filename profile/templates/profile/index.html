{% extends "profile/base.html" %}
{% load profile_tags %}
{% load url from future %}
{% load staticfiles %}
{% block title %}Your profile{% endblock %}

{% block extra_css %}
    <link href="{% static 'profile/css/chosen.min.css' %}" rel="stylesheet"/>
{% endblock %}

{% block dashboard_content %}
    <header class="main-header">
        <div class="vertical-align">
            <div class="middle">
                <i class="icon icon-profile"></i>
                <h1 class="header-large">Profile</h1>
            </div>
        </div>
    </header>

    <section class="user-profile-content">
        <header class="information">
            <div class="row vertical-align">
                <div class="profile-picture col-xs-4 middle">
                    <div class="img-circle" style="background-image: url({{ profile.avatar }})"></div>
                </div>

                <div class="information col-xs-8 middle">
                    <ul>
                        <li class="meta big">
                            <h2 class="header-large secondary">
                                {{ profile.first_name }} {% if profile.last_name_initial %}
                                    {{ profile.last_name_initial }} {% endif %}.</h2>
                        </li>

                        <li>
                            {{ request.user.email }}
                        </li>

                        <li>
                            {% with progress=profile.get_completion_progress %}
                                <div class="progress-container">
                                    <div class="progress-wrap" data-progress-percent="{{ progress|to_percent }}">
                                        <div class="progress-bar" style="width: {{ progress }}%;"></div>
                                    </div>
                                    <p class="percentage bold">{{ progress }}/100</p>
                                </div>
                            {% endwith %}
                        </li>
                    </ul>
                </div>
            </div>
        </header>

        <div class="content">
            <article class="block-line large">
                <header class="row" style="margin: 0;">
                    <ul class="menu-subpage col-xs-9 public">
                        <li id="link-to-subpage-1" class="link-to-subpage active">Basic information</li>
                        <li id="link-to-subpage-2" class="link-to-subpage">Work & education</li>
                        <li id="link-to-subpage-3" class="link-to-subpage">Interests</li>
                    </ul>
                    <div class="col-xs-3" style="height: 35px; overflow-y: hidden">
                        <div class="profile-save-msg pull-right">&nbsp;</div>
                    </div>
                </header>

                <form action="." class="create-profile-form" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}

                    <section id="subpage-1" class="subpage active">
                        <div class="content form-section">
                            <div class="hidden">
                                {{form.profile_picture}}
                            </div>

                            <fieldset>
                                <label for="first-name" class="header-medium secondary">First name</label>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="input-container">
                                            <i class="icon icon-edit"></i>
                                            <input id="id-first_name" type="text" name="first_name" value="{{ profile.first_name }}"
                                                   placeholder="First name">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset>
                                <label for="id-last_name_initial" class="header-medium secondary">Last name initial</label>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="input-container">
                                            <i class="icon icon-edit"></i>
                                            <input id="id-last_name_initial" type="text" name="last_name_initial" value="{{ profile.last_name_initial }}"
                                                   placeholder="Last name">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset>
                                <label for="id-year_of_birth" class="header-medium secondary">Year of birth</label>

                                <div class="row">
                                    <div class="col-xs-6">
                                        <div class="select-dropdown">
                                            <i class="icon icon-arrow-down"></i>

                                            <select name="year_of_birth" id="id-year_of_birth" onchange="" size="1">
                                                <option value="" disabled="" {% if not profile.year_of_birth %}selected=""{% endif %}>Year</option>
                                                {% for year in ""|get_year_options %}
                                                    <option value="{{ year }}" {% if year == profile.year_of_birth %}selected="selected"{% endif %}>{{ year }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-radio">
                                <label for="gender-female" class="header-medium secondary">Gender</label>

                                <div class="input-container">
                                    <label for="gender-female"><input type="radio" name="gender" value="gender-female"
                                                                      id="gender-female" required=""><span></span>Female</label>

                                    <label for="gender-male"><input type="radio" name="gender" value="gender-male"
                                                                    id="gender-male"
                                                                    required=""><span></span>Male</label>

                                    <label for="gender-undefined"><input type="radio" name="gender"
                                                                         value="gender-undefined" id="gender-undefined"
                                                                         required=""><span></span>I prefer not to
                                        say</label>
                                </div>
                            </fieldset>

                            <fieldset>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label for="id_location" class="header-medium secondary">Location</label>
                                        <div class="select-dropdown">
                                            <i class="icon icon-arrow-down"></i>
                                            {{ form.location }}
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </section>

                    <section id="subpage-2" class="subpage">
                        <div class="content form-section">
                            <fieldset class="fieldset-radio">
                                <label for="education-elementary" class="form-title">Education</label>

                                <div class="input-container">
                                    <label for="education-elementary"><input type="radio" name="education"
                                                                             value="education-elementary"
                                                                             id="education-elementary"
                                                                             required=""><span></span>Elementary</label>

                                    <label for="education-secondary"><input type="radio" name="education"
                                                                            value="education-secondary"
                                                                            id="education-secondary"
                                                                            required=""><span></span>Secondary</label>

                                    <label for="education-higher"><input type="radio" name="education"
                                                                         value="education-higher" id="education-higher"
                                                                         required=""><span></span>Secondary</label>

                                    <label for="education-undefined"><input type="radio" name="education"
                                                                            value="education-undefined"
                                                                            id="education-undefined"
                                                                            required=""><span></span>I prefer not to say</label>
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-radio">
                                <label for="employment-elementary" class="form-title">Employment</label>

                                <div class="input-container">
                                    <label for="employment-student"><input type="radio" name="employment"
                                                                           value="employment-student"
                                                                           id="employment-student"
                                                                           required=""><span></span>Student</label>

                                    <label for="employment-unemployed"><input type="radio" name="employment"
                                                                              value="employment-unemployed"
                                                                              id="employment-unemployed"
                                                                              required=""><span></span>Unemployed</label>

                                    <label for="employment-employed"><input type="radio" name="employment"
                                                                            value="employment-employed"
                                                                            id="employment-employed"
                                                                            required=""><span></span>Employed</label>

                                    <label for="employment-selfemployed"><input type="radio" name="employment"
                                                                                value="employment-selfemployed"
                                                                                id="employment-selfemployed"
                                                                                required=""><span></span>Self-employed</label>

                                    <label for="employment-pensioner"><input type="radio" name="employment"
                                                                             value="employment-pensioner"
                                                                             id="employment-pensioner"
                                                                             required=""><span></span>Pensioner</label>

                                    <label for="employment-undefined"><input type="radio" name="employment"
                                                                             value="employment-undefined"
                                                                             id="employment-undefined"
                                                                             required=""><span></span>I prefer not to
                                        say</label>
                                </div>
                            </fieldset>

                            <fieldset>
                                <label for="id-business_sector" class="header-medium secondary">Business sector</label>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="select-dropdown">
                                            <i class="icon icon-arrow-down"></i>
                                            {{ form.business_sector }}
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset>
                                <label for="id-work_position" class="header-medium secondary">Position</label>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="select-dropdown">
                                            <i class="icon icon-arrow-down"></i>
                                            {{ form.work_position }}
                                        </div>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset>
                                <label for="id-years_experience" class="header-medium secondary">Years of experience</label>

                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="input-container">
                                            <i class="icon icon-edit"></i>
                                            <input id="id-years_experience" type="number" name="years_experience" value="{{ profile.years_experience }}"
                                                   placeholder="Years of experience">
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </section>

                    <section id="subpage-3" class="subpage">
                        <div class="content form-section">
                            <label class="form-title">Technology</label>

                            <fieldset class="fieldset-radio">
                                <label for="id-tech_level" class="header-medium secondary">Technology
                                    expertise</label>

                                <div class="input-container">
                                    {% for tech_level in all_tech_levels %}
                                        <label><input type="radio"
                                               name="devices"
                                               {% if tech_level.0 == profile.tech_level %}
                                                      checked="checked"
                                               {% endif %}
                                               value="{{ tech_level.0 }}">
                                            <span></span>{{ tech_level.1 }}
                                        </label>
                                    {% endfor %}
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-checkbox">
                                <label class="header-medium secondary">What devices do you own?</label>

                                <div class="input-container">
                                    {% for device in all_devices %}
                                        <label><input type="checkbox"
                                               name="devices"
                                               {% if device.0 in profile.list_devices %}
                                                      checked="checked"
                                               {% endif %}
                                               value="{{ device.0 }}">
                                            <span></span>{{ device.1 }}
                                        </label>
                                    {% endfor %}
                                </div>
                            </fieldset>

                            <fieldset class="fieldset-checkbox">
                                <label class="header-medium secondary">What platforms do you prefer</label>

                                <div class="input-container">
                                    {% for platform in all_platforms %}
                                        <label><input type="checkbox"
                                               name="platforms"
                                               {% if platform.0 in profile.list_platforms %}
                                                      checked="checked"
                                               {% endif %}
                                               value="{{ platform.0 }}">
                                            <span></span>{{ platform.1 }}
                                        </label>
                                    {% endfor %}
                                </div>
                            </fieldset>
                        </div>

                        <div class="content form-section">
                            <label class="form-title">Interests</label>

                            <fieldset class="fieldset-checkbox">
                                <label class="header-medium secondary">Which categories fit you best?</label>

                                <div class="input-container">
                                    <label for="interest-business"><input type="checkbox" name="interests"
                                                                          value="interest-business"
                                                                          id="interest-business"><span></span>Business</label>

                                    <label for="interest-education"><input type="checkbox" name="interests"
                                                                           value="interest-education"
                                                                           id="interest-education"><span></span>Education</label>

                                    <label for="interest-entertainment"><input type="checkbox" name="interests"
                                                                               value="interest-entertainment"
                                                                               id="interest-entertainment"><span></span>Entertainment</label>

                                    <label for="interest-finance"><input type="checkbox" name="interests"
                                                                         value="interest-finance" id="interest-finance"><span></span>Finance</label>

                                    <label for="interest-food-and-drinks"><input type="checkbox" name="interests"
                                                                                 value="interest-food-and-drinks"
                                                                                 id="interest-food-and-drinks"><span></span>Food
                                        &amp; Drinks</label>

                                    <label for="interest-health-and-fitness"><input type="checkbox" name="interests"
                                                                                    value="interest-health-and-fitness"
                                                                                    id="interest-health-and-fitness"><span></span>Health
                                        &amp; Fitness</label>

                                    <label for="interest-lifestyle"><input type="checkbox" name="interests"
                                                                           value="interest-lifestyle"
                                                                           id="interest-lifestyle"><span></span>Lifestyle</label>

                                    <label for="interest-medical"><input type="checkbox" name="interests"
                                                                         value="interest-medical" id="interest-medical"><span></span>Medical</label>

                                    <label for="interest-music"><input type="checkbox" name="interests"
                                                                       value="interest-music"
                                                                       id="interest-music"><span></span>Music</label>

                                    <label for="interest-navigation"><input type="checkbox" name="interests"
                                                                            value="interest-navigation"
                                                                            id="interest-navigation"><span></span>Navigation</label>

                                    <label for="interest-news"><input type="checkbox" name="interests"
                                                                      value="interest-news"
                                                                      id="interest-news"><span></span>News</label>

                                    <label for="interest-photo-and-video"><input type="checkbox" name="interests"
                                                                                 value="interest-photo-and-video"
                                                                                 id="interest-photo-and-video"><span></span>Photo
                                        &amp; Video</label>

                                    <label for="interest-productivity"><input type="checkbox" name="interests"
                                                                              value="interest-productivity"
                                                                              id="interest-productivity"><span></span>Productivity</label>

                                    <label for="interest-social-networking"><input type="checkbox" name="interests"
                                                                                   value="interest-social-networking"
                                                                                   id="interest-social-networking"><span></span>Social
                                        Networking</label>

                                    <label for="interest-sports"><input type="checkbox" name="interests"
                                                                        value="interest-sports"
                                                                        id="interest-sports"><span></span>Sports</label>

                                    <label for="interest-travel"><input type="checkbox" name="interests"
                                                                        value="interest-travel"
                                                                        id="interest-travel"><span></span>Travel</label>

                                    <label for="interest-utilities"><input type="checkbox" name="interests"
                                                                           value="interest-utilities"
                                                                           id="interest-utilities"><span></span>Utilities</label>

                                    <label for="interest-weather"><input type="checkbox" name="interests"
                                                                         value="interest-weather" id="interest-weather"><span></span>Weather</label>
                                </div>
                            </fieldset>
                        </div>

                        <div class="content form-section">
                            <label class="form-title">Brands</label>

                            {% include "profile/brand-opinion/feedback.html" %}
                        </div>
                    </section>
                </form>
            </article>

        </div>
    </section>


{% endblock %}

{% block js %}
    <script src="{% static 'profile/js/niceopts.js' %}"></script>
    <script src="{% static 'profile/js/brand-feedback.js' %}"></script>
    <script src="{% static 'profile/js/view.js' %}?v=20160628.2"></script>
    <script src="{% static 'profile/js/edit.js' %}?v=20160628.2"></script>
{% endblock %}